<html>
<title>HTTP Benchmark Report Renderer</title>
<head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages': ['corechart']});

      google.charts.setOnLoadCallback(onLoadCallback);

      const exampleReport = {"10000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 3.211ms, rate sampling interval: 13ms\n  Thread calibration: mean lat.: 3.604ms, rate sampling interval: 17ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     3.43ms    3.08ms  40.29ms   84.96%\n    Req/Sec     5.19k     1.95k   16.06k    82.21%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    2.23ms\n 75.000%    4.39ms\n 90.000%    7.89ms\n 99.000%   13.59ms\n 99.900%   23.02ms\n 99.990%   37.12ms\n 99.999%   39.78ms\n100.000%   40.32ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.297     0.000000            1         1.00\n       0.992     0.100000        44909         1.11\n       1.277     0.200000        89883         1.25\n       1.540     0.300000       134756         1.43\n       1.847     0.400000       179615         1.67\n       2.231     0.500000       224394         2.00\n       2.461     0.550000       246837         2.22\n       2.737     0.600000       269419         2.50\n       3.085     0.650000       291749         2.86\n       3.597     0.700000       314140         3.33\n       4.395     0.750000       336597         4.00\n       4.875     0.775000       347874         4.44\n       5.383     0.800000       359061         5.00\n       5.923     0.825000       370231         5.71\n       6.523     0.850000       381483         6.67\n       7.163     0.875000       392683         8.00\n       7.511     0.887500       398331         8.89\n       7.891     0.900000       403914        10.00\n       8.295     0.912500       409500        11.43\n       8.743     0.925000       415159        13.33\n       9.255     0.937500       420758        16.00\n       9.551     0.943750       423569        17.78\n       9.879     0.950000       426355        20.00\n      10.255     0.956250       429176        22.86\n      10.671     0.962500       431942        26.67\n      11.119     0.968750       434754        32.00\n      11.383     0.971875       436158        35.56\n      11.647     0.975000       437547        40.00\n      11.951     0.978125       438973        45.71\n      12.271     0.981250       440366        53.33\n      12.671     0.984375       441773        64.00\n      12.895     0.985938       442479        71.11\n      13.135     0.987500       443167        80.00\n      13.407     0.989062       443865        91.43\n      13.727     0.990625       444566       106.67\n      14.119     0.992188       445268       128.00\n      14.375     0.992969       445612       142.22\n      14.647     0.993750       445961       160.00\n      14.991     0.994531       446316       182.86\n      15.375     0.995313       446669       213.33\n      15.951     0.996094       447011       256.00\n      16.303     0.996484       447186       284.44\n      16.703     0.996875       447361       320.00\n      17.231     0.997266       447539       365.71\n      17.743     0.997656       447713       426.67\n      18.575     0.998047       447888       512.00\n      19.055     0.998242       447976       568.89\n      19.599     0.998437       448065       640.00\n      20.223     0.998633       448150       731.43\n      21.503     0.998828       448238       853.33\n      23.231     0.999023       448325      1024.00\n      24.159     0.999121       448374      1137.78\n      25.343     0.999219       448413      1280.00\n      26.527     0.999316       448457      1462.86\n      27.359     0.999414       448501      1706.67\n      30.175     0.999512       448544      2048.00\n      31.007     0.999561       448566      2275.56\n      31.391     0.999609       448588      2560.00\n      31.791     0.999658       448610      2925.71\n      32.319     0.999707       448633      3413.33\n      33.247     0.999756       448654      4096.00\n      33.887     0.999780       448665      4551.11\n      34.207     0.999805       448676      5120.00\n      34.591     0.999829       448687      5851.43\n      35.807     0.999854       448698      6826.67\n      36.479     0.999878       448709      8192.00\n      36.895     0.999890       448715      9102.22\n      37.151     0.999902       448721     10240.00\n      37.375     0.999915       448725     11702.86\n      37.951     0.999927       448731     13653.33\n      38.175     0.999939       448736     16384.00\n      38.495     0.999945       448739     18204.44\n      38.623     0.999951       448742     20480.00\n      38.815     0.999957       448744     23405.71\n      38.975     0.999963       448747     27306.67\n      39.263     0.999969       448750     32768.00\n      39.423     0.999973       448753     36408.89\n      39.423     0.999976       448753     40960.00\n      39.519     0.999979       448754     46811.43\n      39.583     0.999982       448755     54613.33\n      39.743     0.999985       448758     65536.00\n      39.743     0.999986       448758     72817.78\n      39.743     0.999988       448758     81920.00\n      39.775     0.999989       448759     93622.86\n      39.775     0.999991       448759    109226.67\n      39.807     0.999992       448760    131072.00\n      39.807     0.999993       448760    145635.56\n      40.031     0.999994       448761    163840.00\n      40.031     0.999995       448761    187245.71\n      40.031     0.999995       448761    218453.33\n      40.095     0.999996       448762    262144.00\n      40.095     0.999997       448762    291271.11\n      40.095     0.999997       448762    327680.00\n      40.095     0.999997       448762    374491.43\n      40.095     0.999998       448762    436906.67\n      40.319     0.999998       448763    524288.00\n      40.319     1.000000       448763          inf\n#[Mean    =        3.427, StdDeviation   =        3.083]\n#[Max     =       40.288, Total count    =       448763]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  574237 requests in 1.00m, 122.67MB read\nRequests/sec:   9570.62\nTransfer/sec:      2.04MB\n", "6000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 2.810ms, rate sampling interval: 12ms\n  Thread calibration: mean lat.: 2.865ms, rate sampling interval: 13ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     2.66ms    2.50ms  19.73ms   85.15%\n    Req/Sec     3.13k     1.58k   11.67k    86.77%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    1.71ms\n 75.000%    2.91ms\n 90.000%    6.60ms\n 99.000%   11.49ms\n 99.900%   14.98ms\n 99.990%   17.63ms\n 99.999%   19.30ms\n100.000%   19.74ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.283     0.000000            1         1.00\n       0.780     0.100000        26959         1.11\n       1.007     0.200000        53865         1.25\n       1.227     0.300000        80843         1.43\n       1.455     0.400000       107739         1.67\n       1.710     0.500000       134630         2.00\n       1.849     0.550000       148019         2.22\n       2.005     0.600000       161471         2.50\n       2.189     0.650000       174927         2.86\n       2.441     0.700000       188361         3.33\n       2.911     0.750000       201810         4.00\n       3.335     0.775000       208531         4.44\n       3.865     0.800000       215274         5.00\n       4.459     0.825000       221986         5.71\n       5.123     0.850000       228700         6.67\n       5.851     0.875000       235457         8.00\n       6.211     0.887500       238824         8.89\n       6.599     0.900000       242153        10.00\n       6.995     0.912500       245552        11.43\n       7.415     0.925000       248899        13.33\n       7.879     0.937500       252243        16.00\n       8.127     0.943750       253935        17.78\n       8.399     0.950000       255638        20.00\n       8.687     0.956250       257312        22.86\n       9.007     0.962500       258979        26.67\n       9.383     0.968750       260680        32.00\n       9.591     0.971875       261517        35.56\n       9.823     0.975000       262336        40.00\n      10.071     0.978125       263187        45.71\n      10.351     0.981250       264016        53.33\n      10.687     0.984375       264855        64.00\n      10.879     0.985938       265282        71.11\n      11.087     0.987500       265697        80.00\n      11.335     0.989062       266114        91.43\n      11.599     0.990625       266538       106.67\n      11.887     0.992188       266965       128.00\n      12.071     0.992969       267172       142.22\n      12.255     0.993750       267379       160.00\n      12.471     0.994531       267588       182.86\n      12.783     0.995313       267800       213.33\n      13.087     0.996094       268007       256.00\n      13.247     0.996484       268112       284.44\n      13.447     0.996875       268222       320.00\n      13.615     0.997266       268322       365.71\n      13.815     0.997656       268428       426.67\n      14.039     0.998047       268532       512.00\n      14.199     0.998242       268585       568.89\n      14.335     0.998437       268636       640.00\n      14.527     0.998633       268690       731.43\n      14.711     0.998828       268742       853.33\n      15.015     0.999023       268794      1024.00\n      15.183     0.999121       268820      1137.78\n      15.295     0.999219       268846      1280.00\n      15.399     0.999316       268873      1462.86\n      15.599     0.999414       268899      1706.67\n      15.783     0.999512       268926      2048.00\n      15.903     0.999561       268939      2275.56\n      16.031     0.999609       268951      2560.00\n      16.183     0.999658       268965      2925.71\n      16.479     0.999707       268978      3413.33\n      16.751     0.999756       268991      4096.00\n      16.895     0.999780       268998      4551.11\n      17.119     0.999805       269005      5120.00\n      17.215     0.999829       269011      5851.43\n      17.407     0.999854       269018      6826.67\n      17.583     0.999878       269024      8192.00\n      17.631     0.999890       269029      9102.22\n      17.711     0.999902       269030     10240.00\n      17.839     0.999915       269034     11702.86\n      17.935     0.999927       269037     13653.33\n      18.015     0.999939       269040     16384.00\n      18.111     0.999945       269042     18204.44\n      18.255     0.999951       269044     20480.00\n      18.719     0.999957       269045     23405.71\n      18.847     0.999963       269047     27306.67\n      18.863     0.999969       269048     32768.00\n      18.879     0.999973       269049     36408.89\n      18.975     0.999976       269050     40960.00\n      19.199     0.999979       269051     46811.43\n      19.215     0.999982       269052     54613.33\n      19.215     0.999985       269052     65536.00\n      19.295     0.999986       269053     72817.78\n      19.295     0.999988       269053     81920.00\n      19.391     0.999989       269054     93622.86\n      19.391     0.999991       269054    109226.67\n      19.391     0.999992       269054    131072.00\n      19.519     0.999993       269055    145635.56\n      19.519     0.999994       269055    163840.00\n      19.519     0.999995       269055    187245.71\n      19.519     0.999995       269055    218453.33\n      19.519     0.999996       269055    262144.00\n      19.743     0.999997       269056    291271.11\n      19.743     1.000000       269056          inf\n#[Mean    =        2.663, StdDeviation   =        2.504]\n#[Max     =       19.728, Total count    =       269056]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  344921 requests in 1.00m, 73.68MB read\nRequests/sec:   5748.61\nTransfer/sec:      1.23MB\n", "14000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 4.224ms, rate sampling interval: 17ms\n  Thread calibration: mean lat.: 4.781ms, rate sampling interval: 21ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     4.56ms    3.72ms  27.01ms   81.13%\n    Req/Sec     7.20k     2.03k   15.55k    77.30%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    3.12ms\n 75.000%    6.46ms\n 90.000%   10.19ms\n 99.000%   16.31ms\n 99.900%   20.29ms\n 99.990%   23.74ms\n 99.999%   26.56ms\n100.000%   27.02ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.314     0.000000            1         1.00\n       1.235     0.100000        62844         1.11\n       1.582     0.200000       125686         1.25\n       1.957     0.300000       188452         1.43\n       2.439     0.400000       251361         1.67\n       3.117     0.500000       314211         2.00\n       3.549     0.550000       345554         2.22\n       4.095     0.600000       376968         2.50\n       4.771     0.650000       408298         2.86\n       5.555     0.700000       439753         3.33\n       6.463     0.750000       471120         4.00\n       6.967     0.775000       486868         4.44\n       7.499     0.800000       502585         5.00\n       8.071     0.825000       518250         5.71\n       8.711     0.850000       534034         6.67\n       9.391     0.875000       549623         8.00\n       9.783     0.887500       557551         8.89\n      10.191     0.900000       565387        10.00\n      10.647     0.912500       573256        11.43\n      11.135     0.925000       581079        13.33\n      11.695     0.937500       588868        16.00\n      12.007     0.943750       592873        17.78\n      12.335     0.950000       596730        20.00\n      12.711     0.956250       600648        22.86\n      13.111     0.962500       604570        26.67\n      13.583     0.968750       608486        32.00\n      13.855     0.971875       610497        35.56\n      14.143     0.975000       612433        40.00\n      14.471     0.978125       614403        45.71\n      14.839     0.981250       616357        53.33\n      15.247     0.984375       618319        64.00\n      15.487     0.985938       619281        71.11\n      15.775     0.987500       620276        80.00\n      16.103     0.989062       621256        91.43\n      16.447     0.990625       622244       106.67\n      16.831     0.992188       623236       128.00\n      17.023     0.992969       623726       142.22\n      17.247     0.993750       624205       160.00\n      17.487     0.994531       624678       182.86\n      17.775     0.995313       625171       213.33\n      18.079     0.996094       625663       256.00\n      18.255     0.996484       625918       284.44\n      18.447     0.996875       626158       320.00\n      18.655     0.997266       626405       365.71\n      18.911     0.997656       626651       426.67\n      19.199     0.998047       626889       512.00\n      19.375     0.998242       627008       568.89\n      19.615     0.998437       627131       640.00\n      19.839     0.998633       627258       731.43\n      20.063     0.998828       627378       853.33\n      20.303     0.999023       627497      1024.00\n      20.479     0.999121       627562      1137.78\n      20.655     0.999219       627621      1280.00\n      20.879     0.999316       627685      1462.86\n      21.103     0.999414       627743      1706.67\n      21.311     0.999512       627810      2048.00\n      21.423     0.999561       627834      2275.56\n      21.631     0.999609       627865      2560.00\n      21.839     0.999658       627898      2925.71\n      22.047     0.999707       627927      3413.33\n      22.335     0.999756       627957      4096.00\n      22.527     0.999780       627972      4551.11\n      22.655     0.999805       627988      5120.00\n      22.895     0.999829       628003      5851.43\n      23.167     0.999854       628018      6826.67\n      23.471     0.999878       628034      8192.00\n      23.647     0.999890       628042      9102.22\n      23.823     0.999902       628049     10240.00\n      24.047     0.999915       628058     11702.86\n      24.127     0.999927       628064     13653.33\n      24.447     0.999939       628072     16384.00\n      24.591     0.999945       628076     18204.44\n      24.719     0.999951       628080     20480.00\n      24.863     0.999957       628084     23405.71\n      25.103     0.999963       628087     27306.67\n      25.407     0.999969       628091     32768.00\n      25.615     0.999973       628093     36408.89\n      25.727     0.999976       628095     40960.00\n      25.855     0.999979       628098     46811.43\n      26.159     0.999982       628099     54613.33\n      26.223     0.999985       628101     65536.00\n      26.319     0.999986       628102     72817.78\n      26.399     0.999988       628103     81920.00\n      26.559     0.999989       628104     93622.86\n      26.575     0.999991       628105    109226.67\n      26.591     0.999992       628106    131072.00\n      26.591     0.999993       628106    145635.56\n      26.655     0.999994       628107    163840.00\n      26.655     0.999995       628107    187245.71\n      26.831     0.999995       628108    218453.33\n      26.831     0.999996       628108    262144.00\n      26.831     0.999997       628108    291271.11\n      26.959     0.999997       628109    327680.00\n      26.959     0.999997       628109    374491.43\n      26.959     0.999998       628109    436906.67\n      26.959     0.999998       628109    524288.00\n      26.959     0.999998       628109    582542.22\n      27.023     0.999998       628110    655360.00\n      27.023     1.000000       628110          inf\n#[Mean    =        4.563, StdDeviation   =        3.725]\n#[Max     =       27.008, Total count    =       628110]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  803617 requests in 1.00m, 171.67MB read\nRequests/sec:  13393.28\nTransfer/sec:      2.86MB\n", "18000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 6.099ms, rate sampling interval: 24ms\n  Thread calibration: mean lat.: 6.668ms, rate sampling interval: 28ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     6.85ms    4.86ms  34.40ms   67.38%\n    Req/Sec     9.20k     1.83k   14.68k    68.64%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    5.59ms\n 75.000%    9.92ms\n 90.000%   14.06ms\n 99.000%   20.27ms\n 99.900%   24.38ms\n 99.990%   29.02ms\n 99.999%   33.69ms\n100.000%   34.43ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.410     0.000000            1         1.00\n       1.691     0.100000        80822         1.11\n       2.295     0.200000       161626         1.25\n       3.277     0.300000       242408         1.43\n       4.371     0.400000       323221         1.67\n       5.591     0.500000       403969         2.00\n       6.291     0.550000       444396         2.22\n       7.079     0.600000       484791         2.50\n       7.951     0.650000       525194         2.86\n       8.903     0.700000       565637         3.33\n       9.919     0.750000       606110         4.00\n      10.455     0.775000       626082         4.44\n      11.047     0.800000       646280         5.00\n      11.687     0.825000       666520         5.71\n      12.375     0.850000       686747         6.67\n      13.159     0.875000       706905         8.00\n      13.591     0.887500       716992         8.89\n      14.063     0.900000       727105        10.00\n      14.559     0.912500       737282        11.43\n      15.087     0.925000       747341        13.33\n      15.679     0.937500       757363        16.00\n      16.015     0.943750       762482        17.78\n      16.367     0.950000       767456        20.00\n      16.783     0.956250       772619        22.86\n      17.231     0.962500       777674        26.67\n      17.743     0.968750       782731        32.00\n      17.999     0.971875       785177        35.56\n      18.287     0.975000       787756        40.00\n      18.607     0.978125       790244        45.71\n      18.959     0.981250       792692        53.33\n      19.375     0.984375       795275        64.00\n      19.599     0.985938       796520        71.11\n      19.839     0.987500       797763        80.00\n      20.111     0.989062       799062        91.43\n      20.399     0.990625       800268       106.67\n      20.751     0.992188       801529       128.00\n      20.943     0.992969       802142       142.22\n      21.167     0.993750       802776       160.00\n      21.439     0.994531       803456       182.86\n      21.695     0.995313       804038       213.33\n      21.999     0.996094       804680       256.00\n      22.191     0.996484       804989       284.44\n      22.399     0.996875       805305       320.00\n      22.639     0.997266       805617       365.71\n      22.927     0.997656       805944       426.67\n      23.231     0.998047       806245       512.00\n      23.423     0.998242       806406       568.89\n      23.615     0.998437       806561       640.00\n      23.855     0.998633       806727       731.43\n      24.111     0.998828       806881       853.33\n      24.431     0.999023       807035      1024.00\n      24.671     0.999121       807113      1137.78\n      24.847     0.999219       807190      1280.00\n      25.071     0.999316       807271      1462.86\n      25.343     0.999414       807351      1706.67\n      25.647     0.999512       807428      2048.00\n      25.823     0.999561       807470      2275.56\n      26.015     0.999609       807507      2560.00\n      26.255     0.999658       807546      2925.71\n      26.575     0.999707       807585      3413.33\n      26.959     0.999756       807624      4096.00\n      27.151     0.999780       807650      4551.11\n      27.327     0.999805       807664      5120.00\n      27.647     0.999829       807683      5851.43\n      27.999     0.999854       807706      6826.67\n      28.399     0.999878       807723      8192.00\n      28.607     0.999890       807733      9102.22\n      29.071     0.999902       807744     10240.00\n      30.111     0.999915       807752     11702.86\n      31.215     0.999927       807762     13653.33\n      31.743     0.999939       807772     16384.00\n      32.047     0.999945       807777     18204.44\n      32.159     0.999951       807782     20480.00\n      32.543     0.999957       807787     23405.71\n      32.799     0.999963       807792     27306.67\n      33.023     0.999969       807799     32768.00\n      33.023     0.999973       807799     36408.89\n      33.151     0.999976       807802     40960.00\n      33.183     0.999979       807804     46811.43\n      33.407     0.999982       807807     54613.33\n      33.439     0.999985       807809     65536.00\n      33.503     0.999986       807810     72817.78\n      33.567     0.999988       807812     81920.00\n      33.695     0.999989       807813     93622.86\n      33.759     0.999991       807814    109226.67\n      33.791     0.999992       807815    131072.00\n      33.823     0.999993       807816    145635.56\n      33.887     0.999994       807817    163840.00\n      33.887     0.999995       807817    187245.71\n      33.983     0.999995       807818    218453.33\n      33.983     0.999996       807818    262144.00\n      34.047     0.999997       807819    291271.11\n      34.047     0.999997       807819    327680.00\n      34.047     0.999997       807819    374491.43\n      34.207     0.999998       807820    436906.67\n      34.207     0.999998       807820    524288.00\n      34.207     0.999998       807820    582542.22\n      34.207     0.999998       807820    655360.00\n      34.207     0.999999       807820    748982.86\n      34.431     0.999999       807821    873813.33\n      34.431     1.000000       807821          inf\n#[Mean    =        6.846, StdDeviation   =        4.857]\n#[Max     =       34.400, Total count    =       807821]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  1032951 requests in 1.00m, 220.66MB read\nRequests/sec:  17215.40\nTransfer/sec:      3.68MB\n", "12000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 3.703ms, rate sampling interval: 15ms\n  Thread calibration: mean lat.: 4.167ms, rate sampling interval: 19ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     3.94ms    3.27ms  26.29ms   82.98%\n    Req/Sec     6.20k     2.06k   15.94k    79.10%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    2.64ms\n 75.000%    5.46ms\n 90.000%    8.80ms\n 99.000%   14.61ms\n 99.900%   19.18ms\n 99.990%   22.16ms\n 99.999%   24.59ms\n100.000%   26.30ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.344     0.000000            1         1.00\n       1.131     0.100000        53893         1.11\n       1.449     0.200000       107723         1.25\n       1.756     0.300000       161634         1.43\n       2.135     0.400000       215504         1.67\n       2.645     0.500000       269276         2.00\n       2.969     0.550000       296282         2.22\n       3.357     0.600000       323192         2.50\n       3.887     0.650000       350071         2.86\n       4.583     0.700000       376993         3.33\n       5.459     0.750000       404015         4.00\n       5.939     0.775000       417445         4.44\n       6.427     0.800000       430936         5.00\n       6.919     0.825000       444321         5.71\n       7.459     0.850000       457774         6.67\n       8.079     0.875000       471225         8.00\n       8.431     0.887500       478045         8.89\n       8.799     0.900000       484687        10.00\n       9.215     0.912500       491464        11.43\n       9.687     0.925000       498238        13.33\n      10.191     0.937500       504964        16.00\n      10.487     0.943750       508297        17.78\n      10.807     0.950000       511638        20.00\n      11.167     0.956250       515031        22.86\n      11.559     0.962500       518348        26.67\n      11.999     0.968750       521720        32.00\n      12.255     0.971875       523412        35.56\n      12.535     0.975000       525079        40.00\n      12.863     0.978125       526797        45.71\n      13.207     0.981250       528458        53.33\n      13.631     0.984375       530151        64.00\n      13.855     0.985938       530995        71.11\n      14.127     0.987500       531834        80.00\n      14.407     0.989062       532653        91.43\n      14.759     0.990625       533498       106.67\n      15.143     0.992188       534333       128.00\n      15.399     0.992969       534761       142.22\n      15.679     0.993750       535179       160.00\n      16.007     0.994531       535602       182.86\n      16.343     0.995313       536017       213.33\n      16.719     0.996094       536444       256.00\n      16.911     0.996484       536652       284.44\n      17.151     0.996875       536874       320.00\n      17.439     0.997266       537074       365.71\n      17.711     0.997656       537280       426.67\n      18.111     0.998047       537492       512.00\n      18.319     0.998242       537603       568.89\n      18.527     0.998437       537707       640.00\n      18.703     0.998633       537806       731.43\n      18.927     0.998828       537913       853.33\n      19.215     0.999023       538016      1024.00\n      19.407     0.999121       538070      1137.78\n      19.631     0.999219       538122      1280.00\n      19.839     0.999316       538172      1462.86\n      20.127     0.999414       538225      1706.67\n      20.367     0.999512       538277      2048.00\n      20.543     0.999561       538305      2275.56\n      20.671     0.999609       538330      2560.00\n      20.815     0.999658       538358      2925.71\n      20.991     0.999707       538384      3413.33\n      21.215     0.999756       538408      4096.00\n      21.327     0.999780       538422      4551.11\n      21.503     0.999805       538434      5120.00\n      21.647     0.999829       538448      5851.43\n      21.871     0.999854       538462      6826.67\n      22.015     0.999878       538474      8192.00\n      22.063     0.999890       538480      9102.22\n      22.191     0.999902       538487     10240.00\n      22.271     0.999915       538493     11702.86\n      22.479     0.999927       538500     13653.33\n      22.655     0.999939       538509     16384.00\n      22.735     0.999945       538510     18204.44\n      22.959     0.999951       538513     20480.00\n      23.343     0.999957       538516     23405.71\n      23.647     0.999963       538520     27306.67\n      23.839     0.999969       538523     32768.00\n      23.967     0.999973       538525     36408.89\n      24.063     0.999976       538526     40960.00\n      24.159     0.999979       538528     46811.43\n      24.447     0.999982       538530     54613.33\n      24.495     0.999985       538531     65536.00\n      24.511     0.999986       538532     72817.78\n      24.559     0.999988       538533     81920.00\n      24.591     0.999989       538534     93622.86\n      24.671     0.999991       538535    109226.67\n      24.671     0.999992       538535    131072.00\n      24.751     0.999993       538536    145635.56\n      24.751     0.999994       538536    163840.00\n      25.631     0.999995       538537    187245.71\n      25.631     0.999995       538537    218453.33\n      25.631     0.999996       538537    262144.00\n      25.695     0.999997       538538    291271.11\n      25.695     0.999997       538538    327680.00\n      25.695     0.999997       538538    374491.43\n      25.695     0.999998       538538    436906.67\n      25.695     0.999998       538538    524288.00\n      26.303     0.999998       538539    582542.22\n      26.303     1.000000       538539          inf\n#[Mean    =        3.943, StdDeviation   =        3.268]\n#[Max     =       26.288, Total count    =       538539]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  689033 requests in 1.00m, 147.19MB read\nRequests/sec:  11483.63\nTransfer/sec:      2.45MB\n", "16000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 5.043ms, rate sampling interval: 21ms\n  Thread calibration: mean lat.: 5.643ms, rate sampling interval: 25ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     5.49ms    4.34ms  33.54ms   77.63%\n    Req/Sec     8.20k     1.97k   15.21k    70.95%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    4.03ms\n 75.000%    7.89ms\n 90.000%   12.02ms\n 99.000%   18.56ms\n 99.900%   22.78ms\n 99.990%   25.76ms\n 99.999%   28.42ms\n100.000%   33.57ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.345     0.000000            1         1.00\n       1.380     0.100000        71841         1.11\n       1.798     0.200000       143708         1.25\n       2.315     0.300000       215661         1.43\n       3.059     0.400000       287304         1.67\n       4.033     0.500000       359078         2.00\n       4.595     0.550000       395117         2.22\n       5.291     0.600000       430959         2.50\n       6.039     0.650000       466846         2.86\n       6.903     0.700000       502691         3.33\n       7.895     0.750000       538593         4.00\n       8.447     0.775000       556593         4.44\n       9.055     0.800000       574538         5.00\n       9.687     0.825000       592587         5.71\n      10.399     0.850000       610558         6.67\n      11.167     0.875000       628381         8.00\n      11.559     0.887500       637328         8.89\n      12.015     0.900000       646428        10.00\n      12.487     0.912500       655257        11.43\n      13.023     0.925000       664265        13.33\n      13.639     0.937500       673280        16.00\n      13.991     0.943750       677801        17.78\n      14.351     0.950000       682249        20.00\n      14.735     0.956250       686723        22.86\n      15.199     0.962500       691186        26.67\n      15.687     0.968750       695688        32.00\n      16.007     0.971875       697939        35.56\n      16.359     0.975000       700185        40.00\n      16.719     0.978125       702403        45.71\n      17.151     0.981250       704626        53.33\n      17.583     0.984375       706911        64.00\n      17.823     0.985938       708018        71.11\n      18.111     0.987500       709179        80.00\n      18.383     0.989062       710264        91.43\n      18.703     0.990625       711414       106.67\n      19.103     0.992188       712507       128.00\n      19.311     0.992969       713053       142.22\n      19.535     0.993750       713610       160.00\n      19.807     0.994531       714176       182.86\n      20.111     0.995313       714733       213.33\n      20.447     0.996094       715291       256.00\n      20.639     0.996484       715579       284.44\n      20.831     0.996875       715845       320.00\n      21.119     0.997266       716144       365.71\n      21.391     0.997656       716418       426.67\n      21.679     0.998047       716697       512.00\n      21.839     0.998242       716838       568.89\n      22.047     0.998437       716968       640.00\n      22.303     0.998633       717113       731.43\n      22.527     0.998828       717248       853.33\n      22.831     0.999023       717394      1024.00\n      23.007     0.999121       717457      1137.78\n      23.199     0.999219       717529      1280.00\n      23.407     0.999316       717604      1462.86\n      23.727     0.999414       717674      1706.67\n      23.999     0.999512       717739      2048.00\n      24.159     0.999561       717778      2275.56\n      24.271     0.999609       717812      2560.00\n      24.431     0.999658       717845      2925.71\n      24.591     0.999707       717882      3413.33\n      24.767     0.999756       717915      4096.00\n      24.959     0.999780       717935      4551.11\n      25.055     0.999805       717949      5120.00\n      25.167     0.999829       717966      5851.43\n      25.279     0.999854       717983      6826.67\n      25.471     0.999878       718001      8192.00\n      25.599     0.999890       718010      9102.22\n      25.791     0.999902       718020     10240.00\n      25.871     0.999915       718027     11702.86\n      26.015     0.999927       718036     13653.33\n      26.143     0.999939       718045     16384.00\n      26.239     0.999945       718049     18204.44\n      26.351     0.999951       718053     20480.00\n      26.687     0.999957       718058     23405.71\n      26.927     0.999963       718062     27306.67\n      27.103     0.999969       718067     32768.00\n      27.167     0.999973       718069     36408.89\n      27.359     0.999976       718071     40960.00\n      27.423     0.999979       718073     46811.43\n      27.567     0.999982       718075     54613.33\n      28.095     0.999985       718078     65536.00\n      28.143     0.999986       718079     72817.78\n      28.351     0.999988       718080     81920.00\n      28.415     0.999989       718081     93622.86\n      28.527     0.999991       718082    109226.67\n      28.575     0.999992       718083    131072.00\n      28.751     0.999993       718084    145635.56\n      28.751     0.999994       718084    163840.00\n      29.039     0.999995       718085    187245.71\n      29.039     0.999995       718085    218453.33\n      29.695     0.999996       718086    262144.00\n      29.695     0.999997       718086    291271.11\n      29.695     0.999997       718086    327680.00\n      30.239     0.999997       718087    374491.43\n      30.239     0.999998       718087    436906.67\n      30.239     0.999998       718087    524288.00\n      30.239     0.999998       718087    582542.22\n      30.239     0.999998       718087    655360.00\n      33.567     0.999999       718088    748982.86\n      33.567     1.000000       718088          inf\n#[Mean    =        5.489, StdDeviation   =        4.340]\n#[Max     =       33.536, Total count    =       718088]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  918287 requests in 1.00m, 196.17MB read\nRequests/sec:  15304.72\nTransfer/sec:      3.27MB\n", "8000": "Running 1m test @ http://172.31.16.178:18080\n  2 threads and 2048 connections\n  Thread calibration: mean lat.: 3.136ms, rate sampling interval: 13ms\n  Thread calibration: mean lat.: 3.317ms, rate sampling interval: 15ms\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     3.02ms    2.68ms  22.82ms   84.85%\n    Req/Sec     4.16k     1.78k   12.93k    85.82%\n  Latency Distribution (HdrHistogram - Recorded Latency)\n 50.000%    2.00ms\n 75.000%    3.63ms\n 90.000%    7.10ms\n 99.000%   12.28ms\n 99.900%   16.32ms\n 99.990%   20.38ms\n 99.999%   22.35ms\n100.000%   22.83ms\n\n  Detailed Percentile spectrum:\n       Value   Percentile   TotalCount 1/(1-Percentile)\n\n       0.281     0.000000            2         1.00\n       0.875     0.100000        35981         1.11\n       1.166     0.200000        71849         1.25\n       1.414     0.300000       107750         1.43\n       1.667     0.400000       143713         1.67\n       1.998     0.500000       179607         2.00\n       2.189     0.550000       197697         2.22\n       2.403     0.600000       215600         2.50\n       2.661     0.650000       233544         2.86\n       3.037     0.700000       251394         3.33\n       3.631     0.750000       269371         4.00\n       4.079     0.775000       278335         4.44\n       4.567     0.800000       287345         5.00\n       5.139     0.825000       296326         5.71\n       5.739     0.850000       305272         6.67\n       6.379     0.875000       314284         8.00\n       6.723     0.887500       318762         8.89\n       7.099     0.900000       323243        10.00\n       7.487     0.912500       327712        11.43\n       7.927     0.925000       332233        13.33\n       8.407     0.937500       336720        16.00\n       8.703     0.943750       338987        17.78\n       8.983     0.950000       341208        20.00\n       9.303     0.956250       343422        22.86\n       9.663     0.962500       345690        26.67\n      10.095     0.968750       347933        32.00\n      10.319     0.971875       349031        35.56\n      10.567     0.975000       350151        40.00\n      10.839     0.978125       351282        45.71\n      11.143     0.981250       352422        53.33\n      11.479     0.984375       353533        64.00\n      11.671     0.985938       354084        71.11\n      11.879     0.987500       354639        80.00\n      12.119     0.989062       355203        91.43\n      12.391     0.990625       355769       106.67\n      12.735     0.992188       356321       128.00\n      12.935     0.992969       356602       142.22\n      13.151     0.993750       356888       160.00\n      13.383     0.994531       357163       182.86\n      13.687     0.995313       357444       213.33\n      14.023     0.996094       357728       256.00\n      14.215     0.996484       357864       284.44\n      14.431     0.996875       358008       320.00\n      14.639     0.997266       358148       365.71\n      14.935     0.997656       358287       426.67\n      15.207     0.998047       358429       512.00\n      15.327     0.998242       358495       568.89\n      15.511     0.998437       358565       640.00\n      15.767     0.998633       358638       731.43\n      16.071     0.998828       358706       853.33\n      16.375     0.999023       358777      1024.00\n      16.591     0.999121       358811      1137.78\n      16.815     0.999219       358849      1280.00\n      17.039     0.999316       358885      1462.86\n      17.279     0.999414       358919      1706.67\n      17.567     0.999512       358951      2048.00\n      17.727     0.999561       358969      2275.56\n      17.999     0.999609       358986      2560.00\n      18.239     0.999658       359004      2925.71\n      18.991     0.999707       359023      3413.33\n      19.407     0.999756       359039      4096.00\n      19.615     0.999780       359049      4551.11\n      19.695     0.999805       359058      5120.00\n      19.823     0.999829       359065      5851.43\n      19.935     0.999854       359074      6826.67\n      20.159     0.999878       359083      8192.00\n      20.319     0.999890       359087      9102.22\n      20.463     0.999902       359091     10240.00\n      20.639     0.999915       359097     11702.86\n      20.719     0.999927       359100     13653.33\n      20.959     0.999939       359106     16384.00\n      20.991     0.999945       359107     18204.44\n      21.231     0.999951       359109     20480.00\n      21.423     0.999957       359111     23405.71\n      21.519     0.999963       359113     27306.67\n      21.695     0.999969       359116     32768.00\n      21.871     0.999973       359117     36408.89\n      21.903     0.999976       359118     40960.00\n      21.967     0.999979       359119     46811.43\n      22.175     0.999982       359120     54613.33\n      22.255     0.999985       359121     65536.00\n      22.351     0.999986       359122     72817.78\n      22.351     0.999988       359122     81920.00\n      22.463     0.999989       359123     93622.86\n      22.463     0.999991       359123    109226.67\n      22.527     0.999992       359124    131072.00\n      22.527     0.999993       359124    145635.56\n      22.527     0.999994       359124    163840.00\n      22.767     0.999995       359125    187245.71\n      22.767     0.999995       359125    218453.33\n      22.767     0.999996       359125    262144.00\n      22.767     0.999997       359125    291271.11\n      22.767     0.999997       359125    327680.00\n      22.831     0.999997       359126    374491.43\n      22.831     1.000000       359126          inf\n#[Mean    =        3.021, StdDeviation   =        2.685]\n#[Max     =       22.816, Total count    =       359126]\n#[Buckets =           27, SubBuckets     =         2048]\n----------------------------------------------------------\n  459764 requests in 1.00m, 98.22MB read\nRequests/sec:   7662.47\nTransfer/sec:      1.64MB\n"};
      function onLoadCallback() {
        drawChart(parseReport(exampleReport));
      }

      function onInputChange(files) {
        const selectedFile = files[0];
        selectedFile.text().then(text => JSON.parse(text)).then(parseReport).then(drawChart);
      }

      function onSelectChange(a) {
        console.log(a)
      }

      const percentiles = ["50.000%", "75.000%", "90.000%", "99.000%", "99.900%", "99.990%", "99.999%"];
      const regexs = {
        total: new RegExp(/^\s*(\d+) requests in/),
        error: new RegExp(/^\s*Non-2xx or 3xx responses: (\d+)\s*$/),
        throughput: new RegExp(/^\s*Requests\/sec:\s*(.+)\s*$/),
        percentile(name) {
          return new RegExp(`^\\s*${name}\\s*(.+)\\s*$`);
        }
      };

      function parseReport(report) {
        const data = {};
        for (const rate in report) {
          const stdout = report[rate];
          // console.log(stdout);
          const lines = stdout.split('\n');
          const item = data[rate] = {percentiles: {}, total: 0, error: 0, throughput: 0};
          percentiles.map(percentile => {
            lines.forEach(line => {
              const matches = regexs.percentile(percentile).exec(line);
              if (matches) {
                item.percentiles[percentile] = getMillis(matches[1].trim());
              }
            });
          });
          lines.forEach(line => {
            let matches = regexs.total.exec(line);
            if (matches) {
              item.total = Number(matches[1].trim());
            }
            matches = regexs.error.exec(line);
            if (matches) {
              item.error = Number(matches[1].trim());
            }
            matches = regexs.throughput.exec(line);
            if (matches) {
              item.throughput = Number(matches[1].trim());
            }
          });
        }
        return data;
      }

      // get milliseconds from string time representation
      function getMillis(str) {
        if (str.endsWith('ms')) {
          return Number(str.slice(0, -2))
        }

        if (str.endsWith('s')) {
          return Number(str.slice(0, -1)) * 1000
        }

        if (str.endsWith('m')) {
          return Number(str.slice(0, -1)) * 60 * 1000
        }

        throw new Error(`unhandled time unit ${str}`);
      }

      function drawChart(report) {
        console.log('draw chart for report', report);

        const latencyRows = [['Rate (Req/s)'].concat(percentiles)];
        const throughputRows = [['Rate (Req/s)', 'Throughput']];
        const errRows = [['Rate (Req/s)', 'Error Rate']];

        for (const rate in report) {
          const item = report[rate];
          latencyRows.push([rate].concat(Object.values(item.percentiles)));
          throughputRows.push([rate, item.throughput]);
          errRows.push([rate, (item.error / item.total) * 100]);
        }

        new google.visualization.LineChart(document.getElementById('latency'))
          .draw(google.visualization.arrayToDataTable(latencyRows), {
            title: 'Latency by Rate',
            // curveType: 'function',
            focusTarget: 'category',
            explorer: {
              actions: ['dragToZoom', 'rightClickToReset']
            },
            hAxis: {
              title: 'Rate (Req/s)',
            },
            vAxis: {
              title: 'Latency (ms)',
              viewWindow: {
                min: 0
              }
            }
            // width: 1500,
            // height: 600,
          });

        new google.visualization.LineChart(document.getElementById('throughput'))
          .draw(google.visualization.arrayToDataTable(throughputRows), {
            title: 'Throughput by Rate',
            curveType: 'function',
            focusTarget: 'category',
            hAxis: {
              title: 'Rate (Req/s)',
            },
            vAxis: {
              title: 'Throughput (Req/s)',
              viewWindow: {
                min: 0
              }
            }
            // width: 1500,
            // height: 600,
          });

        new google.visualization.LineChart(document.getElementById('error-rate'))
          .draw(google.visualization.arrayToDataTable(errRows), {
            title: 'Error Rate by Rate',
            curveType: 'function',
            focusTarget: 'category',
            hAxis: {
              title: 'Rate (Req/s)',
            },
            vAxis: {
              title: 'Error Rate (%)',
              viewWindow: {
                min: 0,
                max: 100
              }
            }
            // width: 1500,
            // height: 600,
          });
      }
    </script>
</head>

<body>
<h1>HTTP Benchmark Report Renderer</h1>
<div>
    <label>Select file here to render</label> <input type="file" id="input" onchange="onInputChange(this.files)">
</div>
<!--<div>-->
<!--    <label>Graph Type</label>-->
<!--    <select onchange="onSelectChange(this)">-->
<!--        <option value="latency">Latency by Rate</option>-->
<!--        <option value="throughput">Throughput by Rate</option>-->
<!--        <option value="error-rate">Error Rate by Rate</option>-->
<!--    </select>-->
<!--</div>-->
<div id="latency" style="width: 100%; height: 600px"></div>
<div id="throughput" style="width: 100%; height: 600px"></div>
<div id="error-rate" style="width: 100%; height: 600px"></div>
</body>
</html>
